<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>Parking Revenue Calculator | Monetize Parking</title>
    <meta name="title" content="Parking Revenue Calculator | Monetize Parking">
    <meta name="description" content="Calculate your potential parking lot revenue. See how much you could earn with smart parking management and LPR enforcement.">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://monetize-parking.com/calculator/">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
    <link rel="manifest" href="/assets/site.webmanifest">
    <meta name="theme-color" content="#4BB8E4">
    <meta name="msapplication-TileColor" content="#4BB8E4">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://monetize-parking.com/calculator/">
    <meta property="og:title" content="Parking Revenue Calculator | Monetize Parking">
    <meta property="og:description" content="Calculate your potential parking lot revenue with our free calculator.">
    <meta property="og:image" content="https://monetize-parking.com/assets/og-image.png">
    <meta property="og:site_name" content="Monetize Parking">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://monetize-parking.com/calculator/">
    <meta name="twitter:title" content="Parking Revenue Calculator | Monetize Parking">
    <meta name="twitter:description" content="Calculate your potential parking lot revenue with our free calculator.">
    <meta name="twitter:image" content="https://monetize-parking.com/assets/og-image.png">

    <!-- Preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="/css/styles.css">

    <!-- Calculator-specific styles -->
    <style>
        /* Calculator Section */
        .calculator-section {
            padding: var(--space-3xl) 0;
            background-color: var(--color-white);
        }

        .calculator-wrapper {
            max-width: 800px;
            margin: 0 auto;
        }

        .calculator-card {
            background-color: var(--color-gray-light);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
        }

        @media (min-width: 768px) {
            .calculator-card {
                padding: var(--space-xl);
            }
        }

        /* Mode Selector */
        .mode-selector {
            display: flex;
            gap: var(--space-xs);
            margin-bottom: var(--space-lg);
            background-color: var(--color-white);
            padding: var(--space-xs);
            border-radius: var(--radius-md);
        }

        .mode-btn {
            flex: 1;
            padding: var(--space-sm);
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--color-gray);
            background-color: transparent;
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
        }

        .mode-btn.active {
            color: var(--color-white);
            background-color: var(--color-sky);
        }

        .mode-btn:hover:not(.active) {
            color: var(--color-dark);
            background-color: var(--color-gray-light);
        }

        /* Calculator Inputs */
        .calc-inputs {
            display: grid;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        @media (min-width: 480px) {
            .calc-inputs {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .calc-input-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
        }

        .calc-input-group.full-width {
            grid-column: 1 / -1;
        }

        .calc-label {
            font-weight: 600;
            font-size: 0.875rem;
            color: var(--color-dark);
        }

        .calc-input {
            padding: var(--space-sm);
            font-size: 1rem;
            border: 2px solid transparent;
            border-radius: var(--radius-md);
            background-color: var(--color-white);
            transition: border-color var(--transition-fast);
        }

        .calc-input:focus {
            outline: none;
            border-color: var(--color-sky);
        }

        /* Uplift Toggle */
        .uplift-toggle {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-md);
            background-color: var(--color-white);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-lg);
        }

        .toggle-checkbox {
            width: 20px;
            height: 20px;
            accent-color: var(--color-sky);
            cursor: pointer;
        }

        .toggle-label {
            font-weight: 500;
            font-size: 0.9375rem;
            color: var(--color-dark);
            cursor: pointer;
        }

        .uplift-input-wrapper {
            display: none;
            align-items: center;
            gap: var(--space-xs);
            margin-left: auto;
        }

        .uplift-input-wrapper.visible {
            display: flex;
        }

        .uplift-input {
            width: 60px;
            padding: var(--space-xs);
            font-size: 0.875rem;
            text-align: center;
            border: 2px solid var(--color-gray-light);
            border-radius: var(--radius-sm);
        }

        .uplift-input:focus {
            outline: none;
            border-color: var(--color-sky);
        }

        /* Results */
        .calc-results {
            background-color: var(--color-white);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            margin-bottom: var(--space-lg);
        }

        .result-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-sm) 0;
            border-bottom: 1px solid var(--color-gray-light);
        }

        .result-row:last-child {
            border-bottom: none;
        }

        .result-row.highlight {
            background-color: rgba(75, 184, 228, 0.1);
            margin: var(--space-sm) calc(-1 * var(--space-lg));
            padding: var(--space-sm) var(--space-lg);
            border-radius: var(--radius-sm);
            border-bottom: none;
        }

        .result-label {
            font-weight: 500;
            color: var(--color-gray);
            font-size: 0.9375rem;
        }

        .result-value {
            font-weight: 700;
            color: var(--color-dark);
            font-size: 1.125rem;
        }

        .result-row.highlight .result-label,
        .result-row.highlight .result-value {
            color: var(--color-sky-dark);
        }

        .result-row.highlight .result-value {
            font-size: 1.5rem;
        }

        /* CTA Buttons */
        .calc-cta-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        @media (min-width: 480px) {
            .calc-cta-group {
                flex-direction: row;
            }
        }

        .btn-cta-enhanced {
            flex: 1;
            padding: var(--space-md) var(--space-lg);
            font-size: 1rem;
            font-weight: 700;
            color: var(--color-white);
            background-color: var(--color-red);
            border-radius: var(--radius-md);
            text-align: center;
            transition: background-color var(--transition-fast), transform var(--transition-fast);
        }

        .btn-cta-enhanced:hover {
            background-color: var(--color-red-dark);
            transform: translateY(-2px);
        }

        .btn-cta-secondary {
            flex: 1;
            padding: var(--space-md) var(--space-lg);
            font-size: 1rem;
            font-weight: 700;
            color: var(--color-sky-dark);
            background-color: var(--color-white);
            border: 2px solid var(--color-sky);
            border-radius: var(--radius-md);
            text-align: center;
            transition: all var(--transition-fast);
        }

        .btn-cta-secondary:hover {
            background-color: var(--color-sky);
            color: var(--color-white);
            transform: translateY(-2px);
        }

        /* Email Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: var(--space-md);
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background-color: var(--color-white);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            max-width: 450px;
            width: 100%;
            position: relative;
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            top: var(--space-md);
            right: var(--space-md);
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-gray);
            background-color: var(--color-gray-light);
            border-radius: 50%;
            transition: all var(--transition-fast);
        }

        .modal-close:hover {
            color: var(--color-dark);
            background-color: var(--color-gray-light);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--color-dark);
            margin-bottom: var(--space-xs);
            padding-right: var(--space-xl);
        }

        .modal-subtitle {
            font-size: 0.9375rem;
            color: var(--color-gray);
            margin-bottom: var(--space-lg);
        }

        .modal-form {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }

        .modal-input {
            padding: var(--space-md);
            font-size: 1rem;
            border: 2px solid var(--color-gray-light);
            border-radius: var(--radius-md);
            transition: border-color var(--transition-fast);
        }

        .modal-input:focus {
            outline: none;
            border-color: var(--color-sky);
        }

        .modal-input.error {
            border-color: var(--color-red);
        }

        .modal-error {
            color: var(--color-red);
            font-size: 0.875rem;
            margin-top: calc(-1 * var(--space-xs));
            display: none;
        }

        .modal-error.visible {
            display: block;
        }

        .modal-submit {
            padding: var(--space-md);
            font-size: 1rem;
            font-weight: 700;
            color: var(--color-white);
            background-color: var(--color-red);
            border-radius: var(--radius-md);
            transition: background-color var(--transition-fast);
        }

        .modal-submit:hover {
            background-color: var(--color-red-dark);
        }

        .modal-submit:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
    </style>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LGHS0L5WE8"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-LGHS0L5WE8');
    </script>
</head>
<body>
    <!-- Navigation -->
    <header>
    <nav class="nav scrolled" id="nav">
        <div class="nav-container">
            <a href="/" class="nav-logo">
                <img src="/assets/logo-400.webp" alt="Monetize Parking" width="80" height="80" class="nav-logo-img">
            </a>
            <div class="nav-links">
                <a href="/#story" class="nav-link">Story</a>
                <a href="/#sauces" class="nav-link">Sauces</a>
                <a href="/#find-us" class="nav-link">Find Us</a>
                <a href="https://instagram.com/montanerosauce" target="_blank" rel="noopener noreferrer" class="nav-social" aria-label="Instagram">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z" fill="currentColor"/>
                    </svg>
                </a>
            </div>
            <button class="nav-toggle" id="nav-toggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <!-- Mobile Menu -->
        <div class="nav-mobile" id="nav-mobile">
            <a href="/#story" class="nav-mobile-link">Story</a>
            <a href="/#sauces" class="nav-mobile-link">Sauces</a>
            <a href="/#find-us" class="nav-mobile-link">Find Us</a>
            <a href="https://instagram.com/montanerosauce" target="_blank" rel="noopener noreferrer" class="nav-mobile-link">Instagram</a>
        </div>
    </nav>
    </header>

    <!-- Main Content -->
    <main id="main-content">

    <!-- Page Hero -->
    <section class="page-hero" aria-label="Revenue Calculator">
        <div class="container">
            <div class="page-hero-content">
                <h1 class="page-hero-title">Parking Revenue Calculator</h1>
                <p class="page-hero-subtitle">See what your parking lot could be earning.</p>
            </div>
        </div>
    </section>

    <!-- Calculator Section -->
    <section class="calculator-section" aria-label="Calculator">
        <div class="container">
            <div class="calculator-wrapper">
                <div class="calculator-card">
                    <!-- Mode Selector -->
                    <div class="mode-selector" role="tablist" aria-label="Property type">
                        <button type="button" class="mode-btn active" data-mode="retail" role="tab" aria-selected="true">Retail</button>
                        <button type="button" class="mode-btn" data-mode="nights" role="tab" aria-selected="false">Nights/Weekends</button>
                        <button type="button" class="mode-btn" data-mode="campus" role="tab" aria-selected="false">Campus/Office</button>
                    </div>

                    <!-- Calculator Inputs -->
                    <div class="calc-inputs">
                        <div class="calc-input-group">
                            <label for="spaces" class="calc-label">Number of Spaces</label>
                            <input type="number" id="spaces" class="calc-input" value="50" min="1" max="10000">
                        </div>
                        <div class="calc-input-group">
                            <label for="occupancy" class="calc-label">Avg. Occupancy (%)</label>
                            <input type="number" id="occupancy" class="calc-input" value="60" min="1" max="100">
                        </div>
                        <div class="calc-input-group">
                            <label for="hours" class="calc-label">Hours Open Per Day</label>
                            <input type="number" id="hours" class="calc-input" value="12" min="1" max="24">
                        </div>
                        <div class="calc-input-group">
                            <label for="rate" class="calc-label">Hourly Rate ($)</label>
                            <input type="number" id="rate" class="calc-input" value="2.00" min="0.25" max="100" step="0.25">
                        </div>
                        <div class="calc-input-group">
                            <label for="days" class="calc-label">Days Per Month</label>
                            <input type="number" id="days" class="calc-input" value="26" min="1" max="31">
                        </div>
                    </div>

                    <!-- LPR Uplift Toggle -->
                    <div class="uplift-toggle">
                        <input type="checkbox" id="applyUplift" class="toggle-checkbox" checked>
                        <label for="applyUplift" class="toggle-label">Include LPR Enforcement Uplift</label>
                        <div class="uplift-input-wrapper visible" id="upliftWrapper">
                            <input type="number" id="upliftPercent" class="uplift-input" value="15" min="0" max="100">
                            <span>%</span>
                        </div>
                    </div>

                    <!-- Results -->
                    <div class="calc-results">
                        <div class="result-row">
                            <span class="result-label">Monthly Base Revenue</span>
                            <span class="result-value" id="resultBase">$0</span>
                        </div>
                        <div class="result-row">
                            <span class="result-label">Monthly with LPR Enforcement</span>
                            <span class="result-value" id="resultWithLPR">$0</span>
                        </div>
                        <div class="result-row highlight">
                            <span class="result-label">Annual Projection</span>
                            <span class="result-value" id="resultAnnual">$0</span>
                        </div>
                    </div>

                    <!-- CTA Buttons -->
                    <div class="calc-cta-group">
                        <a href="/contact/" class="btn-cta-enhanced" id="ctaRevenuePlan">Get Your Custom Revenue Plan</a>
                        <button type="button" class="btn-cta-secondary" id="emailReportBtn">Email Me This Report</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    </main>

    <!-- Email Report Modal -->
    <div class="modal-overlay" id="emailModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-content">
            <button type="button" class="modal-close" id="modalClose" aria-label="Close modal">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <h2 class="modal-title" id="modalTitle">Get Your Free Revenue Report</h2>
            <p class="modal-subtitle">We'll email your personalized estimate and follow up with next steps.</p>
            <form id="emailModalForm" class="modal-form" action="https://formspree.io/f/xdkwwvdz" method="POST">
                <!-- Hidden fields for calculator data -->
                <input type="hidden" name="_subject" id="formSubject">
                <input type="hidden" name="property_type" id="formPropertyType">
                <input type="hidden" name="spaces" id="formSpaces">
                <input type="hidden" name="occupancy" id="formOccupancy">
                <input type="hidden" name="hours" id="formHours">
                <input type="hidden" name="rate" id="formRate">
                <input type="hidden" name="days" id="formDays">
                <input type="hidden" name="uplift_percent" id="formUpliftPercent">
                <input type="hidden" name="lpr_enabled" id="formLprEnabled">
                <input type="hidden" name="monthly_without_lpr" id="formMonthlyWithoutLpr">
                <input type="hidden" name="monthly_with_lpr" id="formMonthlyWithLpr">
                <input type="hidden" name="annual_without_lpr" id="formAnnualWithoutLpr">
                <input type="hidden" name="annual_with_lpr" id="formAnnualWithLpr">

                <input type="email" name="email" id="modalEmail" class="modal-input" placeholder="Enter your email" required aria-describedby="emailError">
                <p class="modal-error" id="emailError" role="alert">Please enter a valid email address.</p>
                <button type="submit" class="modal-submit" id="modalSubmit">Send My Report</button>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="/assets/logo-400.webp" alt="Monetize Parking" width="80" height="80" class="footer-logo-img" loading="lazy">
                </div>
                <div class="footer-social">
                    <a href="https://instagram.com/montanerosauce" target="_blank" rel="noopener noreferrer" class="footer-social-link" aria-label="Instagram">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z" fill="currentColor"/>
                        </svg>
                    </a>
                    <a href="https://tiktok.com/@montanerosauce" target="_blank" rel="noopener noreferrer" class="footer-social-link" aria-label="TikTok">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1.04-.1z" fill="currentColor"/>
                        </svg>
                    </a>
                </div>
                <p class="footer-copyright">&copy; 2025 Monetize Parking</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Mobile navigation toggle
        const navToggle = document.getElementById('nav-toggle');
        const navMobile = document.getElementById('nav-mobile');

        if (navToggle && navMobile) {
            navToggle.addEventListener('click', () => {
                navToggle.classList.toggle('active');
                navMobile.classList.toggle('active');
            });

            navMobile.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    navToggle.classList.remove('active');
                    navMobile.classList.remove('active');
                });
            });
        }

        // Calculator State
        let currentMode = 'retail';

        // DOM Elements
        const modeButtons = document.querySelectorAll('.mode-btn');
        const spacesInput = document.getElementById('spaces');
        const occupancyInput = document.getElementById('occupancy');
        const hoursInput = document.getElementById('hours');
        const rateInput = document.getElementById('rate');
        const daysInput = document.getElementById('days');
        const applyUpliftCheckbox = document.getElementById('applyUplift');
        const upliftPercentInput = document.getElementById('upliftPercent');
        const upliftWrapper = document.getElementById('upliftWrapper');

        const resultBase = document.getElementById('resultBase');
        const resultWithLPR = document.getElementById('resultWithLPR');
        const resultAnnual = document.getElementById('resultAnnual');

        const ctaRevenuePlan = document.getElementById('ctaRevenuePlan');
        const emailReportBtn = document.getElementById('emailReportBtn');
        const emailModal = document.getElementById('emailModal');
        const modalClose = document.getElementById('modalClose');
        const emailModalForm = document.getElementById('emailModalForm');
        const modalEmail = document.getElementById('modalEmail');
        const emailError = document.getElementById('emailError');
        const modalSubmit = document.getElementById('modalSubmit');

        // Format currency
        function formatCurrency(value) {
            return '$' + Math.round(value).toLocaleString('en-US');
        }

        // Calculate revenue
        function calculateRevenue() {
            const spaces = parseFloat(spacesInput.value) || 0;
            const occ = (parseFloat(occupancyInput.value) || 0) / 100;
            const hours = parseFloat(hoursInput.value) || 0;
            const rate = parseFloat(rateInput.value) || 0;
            const days = parseFloat(daysInput.value) || 0;
            const upliftPct = (parseFloat(upliftPercentInput.value) || 0) / 100;
            const applyUplift = applyUpliftCheckbox.checked;

            // Base monthly revenue
            const gross = spaces * occ * hours * rate * days;

            // With LPR uplift
            const grossWith = applyUplift ? gross * (1 + upliftPct) : gross;

            // Annual projection (using the higher value if LPR is enabled)
            const contextAnnual = grossWith * 12;

            // Update display
            resultBase.textContent = formatCurrency(gross);
            resultWithLPR.textContent = formatCurrency(grossWith);
            resultAnnual.textContent = formatCurrency(contextAnnual);

            return { gross, grossWith, contextAnnual, spaces, occ, hours, rate, days, upliftPct, applyUplift };
        }

        // Mode presets
        const modePresets = {
            retail: { hours: 12, days: 26, rate: 2.00, occupancy: 60 },
            nights: { hours: 8, days: 20, rate: 1.50, occupancy: 40 },
            campus: { hours: 10, days: 22, rate: 1.00, occupancy: 70 }
        };

        // Handle mode change
        modeButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                modeButtons.forEach(b => {
                    b.classList.remove('active');
                    b.setAttribute('aria-selected', 'false');
                });
                btn.classList.add('active');
                btn.setAttribute('aria-selected', 'true');

                currentMode = btn.dataset.mode;
                const preset = modePresets[currentMode];

                hoursInput.value = preset.hours;
                daysInput.value = preset.days;
                rateInput.value = preset.rate.toFixed(2);
                occupancyInput.value = preset.occupancy;

                calculateRevenue();
            });
        });

        // Handle uplift toggle
        applyUpliftCheckbox.addEventListener('change', () => {
            upliftWrapper.classList.toggle('visible', applyUpliftCheckbox.checked);
            calculateRevenue();
        });

        // Handle input changes
        [spacesInput, occupancyInput, hoursInput, rateInput, daysInput, upliftPercentInput].forEach(input => {
            input.addEventListener('input', calculateRevenue);
        });

        // Initial calculation
        calculateRevenue();

        // GA4 tracking for "Get Your Custom Revenue Plan" button
        ctaRevenuePlan.addEventListener('click', function(e) {
            e.preventDefault();

            const { gross, grossWith, contextAnnual, spaces, occ, hours, rate, days } = calculateRevenue();

            gtag('event', 'calculator_cta_revenue_plan', {
                'property_type': currentMode,
                'spaces': spaces,
                'occupancy': occ * 100,
                'hours': hours,
                'rate': rate,
                'days': days,
                'monthly_base': gross,
                'monthly_with_lpr': grossWith,
                'annual_projection': contextAnnual
            });

            // Navigate after tracking
            window.location.href = '/contact/';
        });

        // Email Modal functionality
        let focusedElementBeforeModal = null;

        function openModal() {
            focusedElementBeforeModal = document.activeElement;
            emailModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            modalEmail.focus();

            // Populate hidden fields with calculator values
            const { gross, grossWith, spaces, occ, hours, rate, days, upliftPct, applyUplift } = calculateRevenue();

            document.getElementById('formSubject').value = `Calculator Report Request - ${spaces} spaces ${currentMode}`;
            document.getElementById('formPropertyType').value = currentMode;
            document.getElementById('formSpaces').value = spaces;
            document.getElementById('formOccupancy').value = (occ * 100).toFixed(0);
            document.getElementById('formHours').value = hours;
            document.getElementById('formRate').value = rate;
            document.getElementById('formDays').value = days;
            document.getElementById('formUpliftPercent').value = (upliftPct * 100).toFixed(0);
            document.getElementById('formLprEnabled').value = applyUplift ? 'yes' : 'no';
            document.getElementById('formMonthlyWithoutLpr').value = gross.toFixed(2);
            document.getElementById('formMonthlyWithLpr').value = grossWith.toFixed(2);
            document.getElementById('formAnnualWithoutLpr').value = (gross * 12).toFixed(2);
            document.getElementById('formAnnualWithLpr').value = (grossWith * 12).toFixed(2);
        }

        function closeModal() {
            emailModal.classList.remove('active');
            document.body.style.overflow = '';
            modalEmail.value = '';
            modalEmail.classList.remove('error');
            emailError.classList.remove('visible');
            modalSubmit.disabled = false;
            modalSubmit.textContent = 'Send My Report';

            if (focusedElementBeforeModal) {
                focusedElementBeforeModal.focus();
            }
        }

        // Email validation
        function isValidEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        // Open modal
        emailReportBtn.addEventListener('click', openModal);

        // Close modal
        modalClose.addEventListener('click', closeModal);

        // Close on backdrop click
        emailModal.addEventListener('click', (e) => {
            if (e.target === emailModal) {
                closeModal();
            }
        });

        // Close on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && emailModal.classList.contains('active')) {
                closeModal();
            }
        });

        // Focus trap within modal
        emailModal.addEventListener('keydown', (e) => {
            if (e.key === 'Tab') {
                const focusableElements = emailModal.querySelectorAll('button, input:not([type="hidden"])');
                const firstElement = focusableElements[0];
                const lastElement = focusableElements[focusableElements.length - 1];

                if (e.shiftKey && document.activeElement === firstElement) {
                    e.preventDefault();
                    lastElement.focus();
                } else if (!e.shiftKey && document.activeElement === lastElement) {
                    e.preventDefault();
                    firstElement.focus();
                }
            }
        });

        // Form submission
        emailModalForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            const email = modalEmail.value.trim();

            // Validate email
            if (!isValidEmail(email)) {
                modalEmail.classList.add('error');
                emailError.classList.add('visible');
                return;
            }

            modalEmail.classList.remove('error');
            emailError.classList.remove('visible');
            modalSubmit.disabled = true;
            modalSubmit.textContent = 'Sending...';

            try {
                const response = await fetch(emailModalForm.action, {
                    method: 'POST',
                    body: new FormData(emailModalForm),
                    headers: {
                        'Accept': 'application/json'
                    }
                });

                if (response.ok) {
                    const { grossWith, spaces } = calculateRevenue();
                    const applyUplift = applyUpliftCheckbox.checked;

                    // Fire GA4 event
                    gtag('event', 'calculator_report_submitted', {
                        'property_type': currentMode,
                        'spaces': spaces,
                        'monthly_projection': grossWith
                    });

                    // Redirect to thank-you page with parameters
                    window.location.href = '/calculator/report/?spaces=' + spaces + '&type=' + currentMode + '&monthly=' + Math.round(grossWith) + '&annual=' + Math.round(grossWith * 12) + '&lpr=' + (applyUplift ? '1' : '0');
                } else {
                    modalSubmit.disabled = false;
                    modalSubmit.textContent = 'Send My Report';
                    alert('Something went wrong. Please try again.');
                }
            } catch (error) {
                modalSubmit.disabled = false;
                modalSubmit.textContent = 'Send My Report';
                alert('Something went wrong. Please try again.');
            }
        });

        // Clear email error on input
        modalEmail.addEventListener('input', () => {
            modalEmail.classList.remove('error');
            emailError.classList.remove('visible');
        });
    </script>
</body>
</html>
